version: 1
applications:
  - appRoot: lib
    frontend:
      phases:
        preBuild:
          commands:
            - npm ci --verbose
        build:
          commands:
            - npm run build
      artifacts:
        files:
            - '**/*'
        baseDirectory: /
      cache:
        paths: []

  # - appRoot: portal
  #   frontend:
  #     phases:
  #       # preBuild:
  #       #   commands:
  #       #     - rvm get stable && rvm install 3.0.0
  #       #     - rvm use 3.0.0
  #       #     - gem install bundler -v '=2.3.13'
  #       #     - bundle update --bundler
  #       #     - bundle install
  #       #     - npm ci
  #       build:
  #         commands:
  #           - npm ci --verbose
  #           - |
  #             if [ "${AWS_BRANCH}" = "v2" ]
  #             then 
  #               JEKYLL_ENV=production npm run build
  #             else
  #               npm run build 
  #             fi
              
      # artifacts:
      #   files:
      #       - '**/*'
      #   baseDirectory: /
      # cache:
      #   paths: []
